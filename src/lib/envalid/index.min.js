import e from"tty";import{object as r}from"zod";var t={exports:{}};let b=process.argv||[],n=process.env,m=!("NO_COLOR"in n||b.includes("--no-color"))&&("FORCE_COLOR"in n||b.includes("--color")||"win32"===process.platform||e.isatty(1)&&"dumb"!==n.TERM||"CI"in n),o=(e,r,t=e)=>b=>{let n=""+b,m=n.indexOf(r,e.length);return~m?e+i(n,r,t,m)+r:e+n+r},i=(e,r,t,b)=>{let n="",m=0;do n+=e.substring(m,b)+t,m=b+r.length,b=e.indexOf(r,m);while(~b);return n+e.substring(m)},x=(e=m)=>{let r=e?o:()=>String;return{isColorSupported:e,reset:r("\x1b[0m","\x1b[0m"),bold:r("\x1b[1m","\x1b[22m","\x1b[22m\x1b[1m"),dim:r("\x1b[2m","\x1b[22m","\x1b[22m\x1b[2m"),italic:r("\x1b[3m","\x1b[23m"),underline:r("\x1b[4m","\x1b[24m"),inverse:r("\x1b[7m","\x1b[27m"),hidden:r("\x1b[8m","\x1b[28m"),strikethrough:r("\x1b[9m","\x1b[29m"),black:r("\x1b[30m","\x1b[39m"),red:r("\x1b[31m","\x1b[39m"),green:r("\x1b[32m","\x1b[39m"),yellow:r("\x1b[33m","\x1b[39m"),blue:r("\x1b[34m","\x1b[39m"),magenta:r("\x1b[35m","\x1b[39m"),cyan:r("\x1b[36m","\x1b[39m"),white:r("\x1b[37m","\x1b[39m"),gray:r("\x1b[90m","\x1b[39m"),bgBlack:r("\x1b[40m","\x1b[49m"),bgRed:r("\x1b[41m","\x1b[49m"),bgGreen:r("\x1b[42m","\x1b[49m"),bgYellow:r("\x1b[43m","\x1b[49m"),bgBlue:r("\x1b[44m","\x1b[49m"),bgMagenta:r("\x1b[45m","\x1b[49m"),bgCyan:r("\x1b[46m","\x1b[49m"),bgWhite:r("\x1b[47m","\x1b[49m")}};t.exports=x(),t.exports.createColors=x;var s=t.exports;function l(e){let t=e.runtimeEnv??process.env;for(let[e,r]of Object.entries(t))r&&""===r&&delete t[e];if(e.skipValidation)return t;let b="object"==typeof e.client?e.client:{},n="object"==typeof e.server?e.server:{},m="object"==typeof e.shared?e.shared:{},o=r(b),i=r(n),x=r(m),l=e.isServer??("undefined"==typeof window||"Deno"in window),a=o.merge(x),d=i.merge(x).merge(o),c=l?d.safeParse(t):a.safeParse(t),g=e.onValidationError??(e=>{throw console.error(` ${s.red("\xd7")} Invalid environment variables:`),Object.entries(e.flatten().fieldErrors).forEach(([e,r])=>{let t=r?.map(e=>s.dim(e)).join(", ");console.error(`    - ${e}: ${t}`)}),Error("Invalid environment variables")}),f=e.onInvalidAccess??(e=>{throw Error("❌ Attempted to access a server-side environment variable on the client")});if(!1===c.success)return g(c.error);let p=e=>!e.startsWith("NEXT_PUBLIC_")&&!(e in x.shape),u=e=>l||!p(e),v=e=>"__esModule"===e||"$$typeof"===e,h=(e.extends??[]).reduce((e,r)=>Object.assign(e,r),{});return new Proxy(Object.assign(c.data,h),{get(e,r){if("string"==typeof r&&!v(r))return u(r)?Reflect.get(e,r):f(r)}})}export{l as envalid};
